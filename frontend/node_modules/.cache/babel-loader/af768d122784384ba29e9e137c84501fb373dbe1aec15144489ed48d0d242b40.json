{"ast":null,"code":"import _toConsumableArray from\"C:/Users/1/dev/mesto-react/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"C:/Users/1/dev/mesto-react/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";// import './App.css';\nimport React,{useEffect,useState}from'react';import{Header}from'./Header';import{Main}from'./Main';import{Footer}from'./Footer';import{PopupProfileEdit}from'./PopupProfileEdit';import{PopupCardsAdd}from'./PopupCardsAdd';import{PopupEditAvatar}from'./PopupEditAvatar';import{ImagePopup}from'./ImagePopup';import{PopupRemoveCard}from'./PopupRemoveCard';import{api}from'./utils/Api';import{CurrentUserContext}from'../context/CurrentUserContext';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function App(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isEditProfileOpen=_useState2[0],setIsEditProfileOpen=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isAddPlacePopupOpen=_useState4[0],setIsAddPlacePopupOpen=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),isEditAvatarPopupOpen=_useState6[0],setIsEditAvatarPopupOpen=_useState6[1];var _useState7=useState({}),_useState8=_slicedToArray(_useState7,2),selectedCard=_useState8[0],setSelectedCard=_useState8[1];var _useState9=useState({}),_useState10=_slicedToArray(_useState9,2),currentUser=_useState10[0],setCurrentUser=_useState10[1];var _useState11=useState([]),_useState12=_slicedToArray(_useState11,2),cards=_useState12[0],setCards=_useState12[1];useEffect(function(){Promise.all([api.getUserInfo(),api.getCards()]).then(function(_ref){var _ref2=_slicedToArray(_ref,2),userInfo=_ref2[0],initialCards=_ref2[1];setCurrentUser(userInfo);setCards(initialCards);}).catch(function(err){console.error(err);});},[]);function handleEditProfileCLick(){setIsEditProfileOpen(true);}function handleAddCardClick(){setIsAddPlacePopupOpen(true);}function handleAvatarClick(){setIsEditAvatarPopupOpen(true);}function handleCardClick(_ref3){var name=_ref3.name,link=_ref3.link;setSelectedCard({name:name,link:link});}function closeAllPopups(){setIsEditProfileOpen(false);setIsAddPlacePopupOpen(false);setIsEditAvatarPopupOpen(false);setSelectedCard({});}function handleCardLike(card){var isLiked=card.likes.some(function(i){return i._id===currentUser._id;});var method=isLiked?'DELETE':'PUT';api.updateLike(card._id,method).then(function(newCard){setCards(function(state){return state.map(function(c){return c._id===card._id?newCard:c;});});}).catch(function(err){console.error(err);});}function handleCardDelete(card){api.deleteCard(card._id).then(function(){setCards(function(state){return state.filter(function(c){return c._id!==card._id;});});}).catch(function(err){console.error(err);});}function handleUpdateUser(data){api.updateUserInfo(data).then(function(){api.getUserInfo().then(function(userInfo){setCurrentUser(userInfo);closeAllPopups();}).catch(function(err){console.error(err);});});}function handleUpdateAvatar(url){api.updateAvatar(url).then(function(){api.getUserInfo().then(function(userInfo){setCurrentUser(userInfo);closeAllPopups();}).catch(function(err){console.error(err);});});}function handleAddPlaceSubmit(formValues){api.addNewCard(formValues).then(function(newCard){setCards([newCard].concat(_toConsumableArray(cards)));closeAllPopups();}).catch(function(err){console.error(err);});}return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(CurrentUserContext.Provider,{value:currentUser,children:/*#__PURE__*/_jsxs(\"div\",{className:\"page\",children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsx(Main,{onEditAvatar:handleAvatarClick,onEditProfile:handleEditProfileCLick,onAddPlace:handleAddCardClick,onCardClick:handleCardClick,onClose:closeAllPopups,onCardLike:handleCardLike,onCardDelete:handleCardDelete,cards:cards}),/*#__PURE__*/_jsx(Footer,{}),/*#__PURE__*/_jsx(PopupProfileEdit,{isOpened:isEditProfileOpen,onClose:closeAllPopups,onUpdateUser:handleUpdateUser}),/*#__PURE__*/_jsx(PopupCardsAdd,{isOpened:isAddPlacePopupOpen,onClose:closeAllPopups,onAddPlace:handleAddPlaceSubmit}),/*#__PURE__*/_jsx(PopupEditAvatar,{isOpened:isEditAvatarPopupOpen,onClose:closeAllPopups,onUpdateAvatar:handleUpdateAvatar}),/*#__PURE__*/_jsx(PopupRemoveCard,{isOpened:''}),\" \",/*#__PURE__*/_jsx(ImagePopup,{card:selectedCard,onClose:closeAllPopups})]})})});}export default App;","map":{"version":3,"names":["React","useEffect","useState","Header","Main","Footer","PopupProfileEdit","PopupCardsAdd","PopupEditAvatar","ImagePopup","PopupRemoveCard","api","CurrentUserContext","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","App","_useState","_useState2","_slicedToArray","isEditProfileOpen","setIsEditProfileOpen","_useState3","_useState4","isAddPlacePopupOpen","setIsAddPlacePopupOpen","_useState5","_useState6","isEditAvatarPopupOpen","setIsEditAvatarPopupOpen","_useState7","_useState8","selectedCard","setSelectedCard","_useState9","_useState10","currentUser","setCurrentUser","_useState11","_useState12","cards","setCards","Promise","all","getUserInfo","getCards","then","_ref","_ref2","userInfo","initialCards","catch","err","console","error","handleEditProfileCLick","handleAddCardClick","handleAvatarClick","handleCardClick","_ref3","name","link","closeAllPopups","handleCardLike","card","isLiked","likes","some","i","_id","method","updateLike","newCard","state","map","c","handleCardDelete","deleteCard","filter","handleUpdateUser","data","updateUserInfo","handleUpdateAvatar","url","updateAvatar","handleAddPlaceSubmit","formValues","addNewCard","concat","_toConsumableArray","children","Provider","value","className","onEditAvatar","onEditProfile","onAddPlace","onCardClick","onClose","onCardLike","onCardDelete","isOpened","onUpdateUser","onUpdateAvatar"],"sources":["C:/Users/1/dev/mesto-react/src/components/App.js"],"sourcesContent":["// import './App.css';\r\nimport React, { useEffect, useState } from 'react';\r\nimport { Header } from './Header';\r\nimport { Main } from './Main';\r\nimport { Footer } from './Footer';\r\nimport { PopupProfileEdit } from './PopupProfileEdit';\r\nimport { PopupCardsAdd } from './PopupCardsAdd';\r\nimport { PopupEditAvatar } from './PopupEditAvatar';\r\nimport { ImagePopup } from './ImagePopup';\r\nimport { PopupRemoveCard } from './PopupRemoveCard';\r\nimport { api } from './utils/Api';\r\nimport { CurrentUserContext } from '../context/CurrentUserContext';\r\n\r\nfunction App() {\r\n  const [isEditProfileOpen, setIsEditProfileOpen] = useState(false);\r\n  const [isAddPlacePopupOpen, setIsAddPlacePopupOpen] = useState(false);\r\n  const [isEditAvatarPopupOpen, setIsEditAvatarPopupOpen] = useState(false);\r\n  const [selectedCard, setSelectedCard] = useState({});\r\n  const [currentUser, setCurrentUser] = useState({});\r\n  const [cards, setCards] = useState([]);\r\n\r\n  useEffect(() => {\r\n    Promise.all([api.getUserInfo(), api.getCards()])\r\n      .then(([userInfo, initialCards]) => {\r\n        setCurrentUser(userInfo);\r\n\r\n        setCards(initialCards);\r\n      })\r\n      .catch((err) => {\r\n        console.error(err);\r\n      });\r\n  }, []);\r\n\r\n  function handleEditProfileCLick() {\r\n    setIsEditProfileOpen(true);\r\n  }\r\n\r\n  function handleAddCardClick() {\r\n    setIsAddPlacePopupOpen(true);\r\n  }\r\n\r\n  function handleAvatarClick() {\r\n    setIsEditAvatarPopupOpen(true);\r\n  }\r\n\r\n  function handleCardClick({ name, link }) {\r\n    setSelectedCard({ name, link });\r\n  }\r\n\r\n  function closeAllPopups() {\r\n    setIsEditProfileOpen(false);\r\n    setIsAddPlacePopupOpen(false);\r\n    setIsEditAvatarPopupOpen(false);\r\n    setSelectedCard({});\r\n  }\r\n\r\n  function handleCardLike(card) {\r\n    const isLiked = card.likes.some((i) => i._id === currentUser._id);\r\n    const method = isLiked ? 'DELETE' : 'PUT';\r\n\r\n    api\r\n      .updateLike(card._id, method)\r\n      .then((newCard) => {\r\n        setCards((state) => state.map((c) => (c._id === card._id ? newCard : c)));\r\n      })\r\n      .catch((err) => {\r\n        console.error(err);\r\n      });\r\n  }\r\n\r\n  function handleCardDelete(card) {\r\n    api\r\n      .deleteCard(card._id)\r\n      .then(() => {\r\n        setCards((state) => state.filter((c) => c._id !== card._id));\r\n      })\r\n      .catch((err) => {\r\n        console.error(err);\r\n      });\r\n  }\r\n\r\n  function handleUpdateUser(data) {\r\n    api.updateUserInfo(data).then(() => {\r\n      api\r\n        .getUserInfo()\r\n        .then((userInfo) => {\r\n          setCurrentUser(userInfo);\r\n          closeAllPopups();\r\n        })\r\n        .catch((err) => {\r\n          console.error(err);\r\n        });\r\n    });\r\n  }\r\n\r\n  function handleUpdateAvatar(url) {\r\n    api.updateAvatar(url).then(() => {\r\n      api\r\n        .getUserInfo()\r\n        .then((userInfo) => {\r\n          setCurrentUser(userInfo);\r\n          closeAllPopups();\r\n        })\r\n        .catch((err) => {\r\n          console.error(err);\r\n        });\r\n    });\r\n  }\r\n\r\n  function handleAddPlaceSubmit(formValues) {\r\n    api\r\n      .addNewCard(formValues)\r\n      .then((newCard) => {\r\n        setCards([newCard, ...cards]);\r\n        closeAllPopups();\r\n      })\r\n      .catch((err) => {\r\n        console.error(err);\r\n      });\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <CurrentUserContext.Provider value={currentUser}>\r\n        <div className=\"page\">\r\n          <Header />\r\n          <Main\r\n            onEditAvatar={handleAvatarClick}\r\n            onEditProfile={handleEditProfileCLick}\r\n            onAddPlace={handleAddCardClick}\r\n            onCardClick={handleCardClick}\r\n            onClose={closeAllPopups}\r\n            onCardLike={handleCardLike}\r\n            onCardDelete={handleCardDelete}\r\n            cards={cards}\r\n          />\r\n          <Footer />\r\n          <PopupProfileEdit isOpened={isEditProfileOpen} onClose={closeAllPopups} onUpdateUser={handleUpdateUser} />\r\n          <PopupCardsAdd isOpened={isAddPlacePopupOpen} onClose={closeAllPopups} onAddPlace={handleAddPlaceSubmit} />\r\n          <PopupEditAvatar\r\n            isOpened={isEditAvatarPopupOpen}\r\n            onClose={closeAllPopups}\r\n            onUpdateAvatar={handleUpdateAvatar}\r\n          />\r\n          <PopupRemoveCard isOpened={''} /> {/*-------------------*/}\r\n          <ImagePopup card={selectedCard} onClose={closeAllPopups} />\r\n        </div>\r\n      </CurrentUserContext.Provider>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default App;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}