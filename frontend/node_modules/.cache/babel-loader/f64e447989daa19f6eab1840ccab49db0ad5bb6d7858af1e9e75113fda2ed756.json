{"ast":null,"code":"import _defineProperty from\"C:/Users/1/dev/react-mesto-auth/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"C:/Users/1/dev/react-mesto-auth/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"C:/Users/1/dev/react-mesto-auth/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{Registered}from'./Registered';import React,{useState}from'react';import{useNavigate}from'react-router-dom';import*as auth from'./utils/auth.js';import{InfoTooltip}from'./InfoTooltip';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function Register(props){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),registrationError=_useState2[0],setRegistrationError=_useState2[1];var _useState3=useState({password:'',email:''}),_useState4=_slicedToArray(_useState3,2),formValue=_useState4[0],setFormValue=_useState4[1];var navigate=useNavigate();var handleChange=function handleChange(e){var _e$target=e.target,name=_e$target.name,value=_e$target.value;setFormValue(_objectSpread(_objectSpread({},formValue),{},_defineProperty({},name,value)));};var handleSubmit=function handleSubmit(e){e.preventDefault();var password=formValue.password,email=formValue.email;auth.register(password,email).then(function(res){props.handleInfoTooltipOpen();setTimeout(function(){navigate('/sign-in',{replace:true});},1000);setRegistrationError(false);}).catch(function(){props.handleInfoTooltipOpen();setRegistrationError(true);});};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"form\",{className:\"enterance-form\",onSubmit:handleSubmit,name:'sign-up',children:[/*#__PURE__*/_jsx(\"h1\",{className:\"enterance-form__title\",children:\"\\u0420\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0430\\u0446\\u0438\\u044F\"}),/*#__PURE__*/_jsx(\"input\",{className:\"enterance-form__input\",placeholder:\"Email\",id:\"email\",name:\"email\",type:\"email\",value:formValue.email,onChange:handleChange}),/*#__PURE__*/_jsx(\"input\",{className:\"enterance-form__input\",placeholder:\"\\u041F\\u0430\\u0440\\u043E\\u043B\\u044C\",id:\"password\",name:\"password\",type:\"password\",value:formValue.password,onChange:handleChange}),/*#__PURE__*/_jsx(\"button\",{className:\"enterance-form__submit-button\",type:\"submit\",onSubmit:handleSubmit,children:\"\\u0417\\u0430\\u0440\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C\\u0441\\u044F\"})]}),/*#__PURE__*/_jsx(Registered,{}),/*#__PURE__*/_jsx(InfoTooltip,{isOpened:props.isInfoToooltipOpen,error:registrationError,onClose:props.onClose})]});}export{Register};","map":{"version":3,"names":["Registered","React","useState","useNavigate","auth","InfoTooltip","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Register","props","_useState","_useState2","_slicedToArray","registrationError","setRegistrationError","_useState3","password","email","_useState4","formValue","setFormValue","navigate","handleChange","e","_e$target","target","name","value","_objectSpread","_defineProperty","handleSubmit","preventDefault","register","then","res","handleInfoTooltipOpen","setTimeout","replace","catch","children","className","onSubmit","placeholder","id","type","onChange","isOpened","isInfoToooltipOpen","error","onClose"],"sources":["C:/Users/1/dev/react-mesto-auth/src/components/Register.js"],"sourcesContent":["import { Registered } from './Registered';\r\nimport React, { useState } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport * as auth from './utils/auth.js';\r\nimport { InfoTooltip } from './InfoTooltip';\r\n\r\nfunction Register(props) {\r\n  const [registrationError, setRegistrationError] = useState(false);\r\n  const [formValue, setFormValue] = useState({\r\n    password: '',\r\n    email: '',\r\n  });\r\n\r\n  const navigate = useNavigate();\r\n\r\n  const handleChange = (e) => {\r\n    const { name, value } = e.target;\r\n\r\n    setFormValue({\r\n      ...formValue,\r\n      [name]: value,\r\n    });\r\n  };\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n\r\n    const { password, email } = formValue;\r\n    auth\r\n      .register(password, email)\r\n      .then((res) => {\r\n        props.handleInfoTooltipOpen();\r\n        setTimeout(() => {\r\n          navigate('/sign-in', { replace: true });\r\n        }, 1000);\r\n        setRegistrationError(false);\r\n      })\r\n      .catch(() => {\r\n        props.handleInfoTooltipOpen();\r\n        setRegistrationError(true);\r\n      });\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <form className=\"enterance-form\" onSubmit={handleSubmit} name={'sign-up'}>\r\n        <h1 className=\"enterance-form__title\">Регистрация</h1>\r\n        <input\r\n          className=\"enterance-form__input\"\r\n          placeholder=\"Email\"\r\n          id=\"email\"\r\n          name=\"email\"\r\n          type=\"email\"\r\n          value={formValue.email}\r\n          onChange={handleChange}\r\n        />\r\n        <input\r\n          className=\"enterance-form__input\"\r\n          placeholder=\"Пароль\"\r\n          id=\"password\"\r\n          name=\"password\"\r\n          type=\"password\"\r\n          value={formValue.password}\r\n          onChange={handleChange}\r\n        />\r\n        <button className=\"enterance-form__submit-button\" type=\"submit\" onSubmit={handleSubmit}>\r\n          Зарегистрироваться\r\n        </button>\r\n      </form>\r\n      <Registered />\r\n      <InfoTooltip isOpened={props.isInfoToooltipOpen} error={registrationError} onClose={props.onClose} />\r\n    </>\r\n  );\r\n}\r\n\r\nexport { Register };\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}