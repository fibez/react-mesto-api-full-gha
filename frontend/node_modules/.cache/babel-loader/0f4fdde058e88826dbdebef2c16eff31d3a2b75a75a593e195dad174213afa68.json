{"ast":null,"code":"import _slicedToArray from\"C:/Users/1/dev/mesto-react/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useContext,useEffect,useState}from'react';import{CurrentUserContext}from'../context/CurrentUserContext';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function Card(_ref){var card=_ref.card,onCardClick=_ref.onCardClick,onCardLike=_ref.onCardLike,onCardDelete=_ref.onCardDelete;var currentUser=useContext(CurrentUserContext);var isOwn=card.owner._id===currentUser._id;var isLiked=card.likes.some(function(i){return i._id===currentUser._id;});var _useState=useState(),_useState2=_slicedToArray(_useState,2),cardLike=_useState2[0],setCardLike=_useState2[1];var cardLikeButtonClassName=\"elements__like \".concat(isLiked&&'elements__like_active');function showCounter(){if(card.likes.length>0){var counter=card.likes.length;return counter;}}function handleCardClick(){onCardClick(card);}function handleLikeClick(){// console.log(card.likes.length);\nonCardLike(card);}function handleDeleteCard(){onCardDelete(card);}return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"elements__card\",children:[/*#__PURE__*/_jsx(\"img\",{className:\"elements__image\",src:card.link,alt:card.name,onClick:handleCardClick}),/*#__PURE__*/_jsxs(\"div\",{className:\"elements__wrapper\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"elements__place-name\",children:card.name}),/*#__PURE__*/_jsxs(\"div\",{className:\"elements__like-container\",children:[/*#__PURE__*/_jsx(\"button\",{className:cardLikeButtonClassName,onClick:handleLikeClick,type:\"button\",\"aria-label\":\"\\u041F\\u043E\\u043D\\u0440\\u0430\\u0432\\u0438\\u043B\\u043E\\u0441\\u044C\"}),/*#__PURE__*/_jsx(\"span\",{className:\"elements__like-counter\",children:showCounter()})]})]}),isOwn&&/*#__PURE__*/_jsx(\"button\",{className:\"elements__bucket\",type:\"button\",\"aria-label\":\"\\u0423\\u0434\\u0430\\u043B\\u0438\\u0442\\u044C\",onClick:handleDeleteCard})]})});}export{Card};","map":{"version":3,"names":["useContext","useEffect","useState","CurrentUserContext","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Card","_ref","card","onCardClick","onCardLike","onCardDelete","currentUser","isOwn","owner","_id","isLiked","likes","some","i","_useState","_useState2","_slicedToArray","cardLike","setCardLike","cardLikeButtonClassName","concat","showCounter","length","counter","handleCardClick","handleLikeClick","handleDeleteCard","children","className","src","link","alt","name","onClick","type"],"sources":["C:/Users/1/dev/mesto-react/src/components/Card.js"],"sourcesContent":["import { useContext, useEffect, useState } from 'react';\r\nimport { CurrentUserContext } from '../context/CurrentUserContext';\r\n\r\nfunction Card({ card, onCardClick, onCardLike, onCardDelete }) {\r\n  const currentUser = useContext(CurrentUserContext);\r\n  const isOwn = card.owner._id === currentUser._id;\r\n  const isLiked = card.likes.some((i) => i._id === currentUser._id);\r\n\r\n  const [cardLike, setCardLike] = useState();\r\n\r\n  const cardLikeButtonClassName = `elements__like ${isLiked && 'elements__like_active'}`;\r\n\r\n  function showCounter() {\r\n    if (card.likes.length > 0) {\r\n      const counter = card.likes.length;\r\n      return counter;\r\n    }\r\n  }\r\n\r\n  function handleCardClick() {\r\n    onCardClick(card);\r\n  }\r\n\r\n  function handleLikeClick() {\r\n    // console.log(card.likes.length);\r\n    onCardLike(card);\r\n  }\r\n\r\n  function handleDeleteCard() {\r\n    onCardDelete(card);\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <div className=\"elements__card\">\r\n        <img className=\"elements__image\" src={card.link} alt={card.name} onClick={handleCardClick} />\r\n        <div className=\"elements__wrapper\">\r\n          <h2 className=\"elements__place-name\">{card.name}</h2>\r\n          <div className=\"elements__like-container\">\r\n            <button\r\n              className={cardLikeButtonClassName}\r\n              onClick={handleLikeClick}\r\n              type=\"button\"\r\n              aria-label=\"Понравилось\"\r\n            ></button>\r\n            <span className=\"elements__like-counter\">{showCounter()}</span>\r\n          </div>\r\n        </div>\r\n        {isOwn && (\r\n          <button className=\"elements__bucket\" type=\"button\" aria-label=\"Удалить\" onClick={handleDeleteCard}></button>\r\n        )}\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\nexport { Card };\r\n"],"mappings":"gHAAA,OAASA,UAAU,CAAEC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CACvD,OAASC,kBAAkB,KAAQ,+BAA+B,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,gCAAAC,QAAA,IAAAC,SAAA,yBAEnE,QAAS,CAAAC,IAAIA,CAAAC,IAAA,CAAkD,IAA/C,CAAAC,IAAI,CAAAD,IAAA,CAAJC,IAAI,CAAEC,WAAW,CAAAF,IAAA,CAAXE,WAAW,CAAEC,UAAU,CAAAH,IAAA,CAAVG,UAAU,CAAEC,YAAY,CAAAJ,IAAA,CAAZI,YAAY,CACzD,GAAM,CAAAC,WAAW,CAAGhB,UAAU,CAACG,kBAAkB,CAAC,CAClD,GAAM,CAAAc,KAAK,CAAGL,IAAI,CAACM,KAAK,CAACC,GAAG,GAAKH,WAAW,CAACG,GAAG,CAChD,GAAM,CAAAC,OAAO,CAAGR,IAAI,CAACS,KAAK,CAACC,IAAI,CAAC,SAACC,CAAC,QAAK,CAAAA,CAAC,CAACJ,GAAG,GAAKH,WAAW,CAACG,GAAG,GAAC,CAEjE,IAAAK,SAAA,CAAgCtB,QAAQ,EAAE,CAAAuB,UAAA,CAAAC,cAAA,CAAAF,SAAA,IAAnCG,QAAQ,CAAAF,UAAA,IAAEG,WAAW,CAAAH,UAAA,IAE5B,GAAM,CAAAI,uBAAuB,mBAAAC,MAAA,CAAqBV,OAAO,EAAI,uBAAuB,CAAE,CAEtF,QAAS,CAAAW,WAAWA,CAAA,CAAG,CACrB,GAAInB,IAAI,CAACS,KAAK,CAACW,MAAM,CAAG,CAAC,CAAE,CACzB,GAAM,CAAAC,OAAO,CAAGrB,IAAI,CAACS,KAAK,CAACW,MAAM,CACjC,MAAO,CAAAC,OAAO,CAChB,CACF,CAEA,QAAS,CAAAC,eAAeA,CAAA,CAAG,CACzBrB,WAAW,CAACD,IAAI,CAAC,CACnB,CAEA,QAAS,CAAAuB,eAAeA,CAAA,CAAG,CACzB;AACArB,UAAU,CAACF,IAAI,CAAC,CAClB,CAEA,QAAS,CAAAwB,gBAAgBA,CAAA,CAAG,CAC1BrB,YAAY,CAACH,IAAI,CAAC,CACpB,CAEA,mBACEP,IAAA,CAAAI,SAAA,EAAA4B,QAAA,cACE9B,KAAA,QAAK+B,SAAS,CAAC,gBAAgB,CAAAD,QAAA,eAC7BhC,IAAA,QAAKiC,SAAS,CAAC,iBAAiB,CAACC,GAAG,CAAE3B,IAAI,CAAC4B,IAAK,CAACC,GAAG,CAAE7B,IAAI,CAAC8B,IAAK,CAACC,OAAO,CAAET,eAAgB,EAAG,cAC7F3B,KAAA,QAAK+B,SAAS,CAAC,mBAAmB,CAAAD,QAAA,eAChChC,IAAA,OAAIiC,SAAS,CAAC,sBAAsB,CAAAD,QAAA,CAAEzB,IAAI,CAAC8B,IAAI,EAAM,cACrDnC,KAAA,QAAK+B,SAAS,CAAC,0BAA0B,CAAAD,QAAA,eACvChC,IAAA,WACEiC,SAAS,CAAET,uBAAwB,CACnCc,OAAO,CAAER,eAAgB,CACzBS,IAAI,CAAC,QAAQ,CACb,aAAW,oEAAa,EAChB,cACVvC,IAAA,SAAMiC,SAAS,CAAC,wBAAwB,CAAAD,QAAA,CAAEN,WAAW,EAAE,EAAQ,GAC3D,GACF,CACLd,KAAK,eACJZ,IAAA,WAAQiC,SAAS,CAAC,kBAAkB,CAACM,IAAI,CAAC,QAAQ,CAAC,aAAW,4CAAS,CAACD,OAAO,CAAEP,gBAAiB,EACnG,GACG,EACL,CAEP,CAEA,OAAS1B,IAAI"},"metadata":{},"sourceType":"module","externalDependencies":[]}